<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Decision Blueprints — Interactive Explainer</title>
  <style>
    :root{color-scheme:dark; --bg:#0b0f14; --card:#0f1720; --border:#243040; --muted:#94a3b8; --fg:#e6edf3; --ok:#7ee787; --warn:#f2cc60; --bad:#ff7b72; --accent:#1f6feb;}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--fg)}
    a{color:var(--ok)}
    .wrap{max-width:1100px;margin:0 auto;padding:22px}
    .grid{display:grid;grid-template-columns:1.1fr .9fr;gap:14px}
    @media (max-width: 980px){.grid{grid-template-columns:1fr}}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px}
    h1{margin:0 0 6px 0;font-size:22px}
    h2{margin:0 0 8px 0;font-size:16px}
    h3{margin:0 0 8px 0;font-size:14px;color:#cbd5e1}
    .small{font-size:12px;color:var(--muted)}
    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .tab{padding:8px 10px;border-radius:999px;border:1px solid var(--border);background:#0b121b;cursor:pointer;font-size:12px}
    .tab.active{background:rgba(31,111,235,.18);border-color:rgba(31,111,235,.6)}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .row>*{flex:1;min-width:220px}
    button{padding:9px 10px;border-radius:10px;border:1px solid #2b3b50;background:#111c28;color:var(--fg);cursor:pointer}
    button.primary{background:var(--accent);border-color:var(--accent)}
    button:disabled{opacity:.5;cursor:not-allowed}
    pre{overflow:auto;padding:10px;border-radius:12px;background:#081018;border:1px solid #223042;margin:0}
    code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
    .pill{display:inline-block;padding:4px 9px;border-radius:999px;border:1px solid #2b3b50;background:#0b121b;font-size:12px}
    .ok{color:var(--ok)} .warn{color:var(--warn)} .bad{color:var(--bad)}
    .graph{display:grid;grid-template-columns:repeat(12,1fr);gap:8px;align-items:start}
    .node{grid-column:span 4;background:#0b121b;border:1px solid #2b3b50;border-radius:12px;padding:10px}
    .node.active{outline:2px solid rgba(126,231,135,.7)}
    .node .k{font-size:12px;color:var(--muted)}
    .node .t{font-size:13px;margin-top:4px}
    .node .meta{margin-top:6px;font-size:12px;color:var(--muted)}
    .legend{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .sep{height:1px;background:#223042;margin:10px 0}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>On-chain Decision Blueprints for AI Agents</h1>
    <div class="small">
      This is an <b>interactive explainer</b> (not a devnet demo). It helps humans understand how a future of business agents can follow
      <b>exact workflows</b> with auditability: <code>Blueprint (template)</code> → <code>Mission (runtime)</code> → <code>Checkpoint (step)</code>.
    </div>

    <div class="tabs" id="tabs"></div>

    <div class="grid" style="margin-top:12px">
      <div class="card">
        <h2>Blueprint (template)</h2>
        <div class="small">A blueprint is a graph of checkpoints. A mission is a token moving through this graph.</div>
        <div class="legend">
          <span class="pill">Enforced on-chain</span>
          <span class="pill">Attestation-based</span>
          <span class="pill">Branch / retry</span>
        </div>
        <div class="sep"></div>
        <div id="graph" class="graph"></div>
      </div>

      <div class="card">
        <h2>Mission (runtime instance)</h2>
        <div class="small">Walk through the happy path, then toggle hiccups to see how workflows protect the org.</div>
        <div class="sep"></div>

        <div class="row">
          <div>
            <h3>Controls</h3>
            <button class="primary" id="btnStart">Start new mission</button>
            <button id="btnNext">Next checkpoint</button>
            <button id="btnReset">Reset</button>
            <div class="sep"></div>
            <h3>Hiccups (simulate reality)</h3>
            <label class="small"><input type="checkbox" id="hiccupConflict" /> Conflicting attestations</label><br/>
            <label class="small"><input type="checkbox" id="hiccupDrift" /> Terms drift (attestations refer to old terms)</label><br/>
            <label class="small"><input type="checkbox" id="hiccupTimeout" /> Negotiation timeout → escalate to human</label>
          </div>
          <div>
            <h3>Current</h3>
            <div class="pill">checkpoint: <span class="mono" id="curId">—</span></div>
            <div style="margin-top:8px" class="small" id="curExplain">Start a mission to begin.</div>
          </div>
        </div>

        <div class="sep"></div>
        <div class="row">
          <div>
            <h3>Variables (mission state)</h3>
            <pre id="vars"></pre>
          </div>
          <div>
            <h3>Attestations (2-of-3 for critical step)</h3>
            <pre id="atts"></pre>
          </div>
        </div>

        <div class="sep"></div>
        <h3>Event log</h3>
        <pre id="log"></pre>

        <div class="sep"></div>
        <div class="small">
          Repo: <a href="https://github.com/crea8r/onchain-decision-blueprints" target="_blank" rel="noreferrer">crea8r/onchain-decision-blueprints</a>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="./main.js"></script>
</body>
</html>
