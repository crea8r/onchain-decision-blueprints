<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Decision Blueprints — Interactive Explainer</title>
  <style>
    :root{color-scheme:dark; --bg:#0b0f14; --card:#0f1720; --border:#243040; --muted:#94a3b8; --fg:#e6edf3; --ok:#7ee787; --warn:#f2cc60; --bad:#ff7b72; --accent:#1f6feb;}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--fg)}
    a{color:var(--ok)}
    .wrap{max-width:1100px;margin:0 auto;padding:22px}
    .grid{display:grid;grid-template-columns:1fr;gap:14px}
    @media (max-width: 980px){.grid{grid-template-columns:1fr}}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px}
    h1{margin:0 0 6px 0;font-size:22px}
    h2{margin:0 0 8px 0;font-size:16px}
    h3{margin:0 0 8px 0;font-size:14px;color:#cbd5e1}
    .small{font-size:12px;color:var(--muted)}
    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .tab{padding:8px 10px;border-radius:999px;border:1px solid var(--border);background:#0b121b;cursor:pointer;font-size:12px}
    .tab.active{background:rgba(31,111,235,.18);border-color:rgba(31,111,235,.6)}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .row>*{flex:1;min-width:220px}
    button{padding:9px 10px;border-radius:10px;border:1px solid #2b3b50;background:#111c28;color:var(--fg);cursor:pointer}
    button.primary{background:var(--accent);border-color:var(--accent)}
    button:disabled{opacity:.5;cursor:not-allowed}
    pre{overflow:auto;padding:10px;border-radius:12px;background:#081018;border:1px solid #223042;margin:0}
    code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
    .pill{display:inline-block;padding:4px 9px;border-radius:999px;border:1px solid #2b3b50;background:#0b121b;font-size:12px}
    .ok{color:var(--ok)} .warn{color:var(--warn)} .bad{color:var(--bad)}
    .graph{display:grid;grid-template-columns:repeat(12,1fr);gap:8px;align-items:start}
    .hint{font-size:12px;color:var(--muted);margin-top:6px}
    .node{grid-column:span 4;background:#0b121b;border:1px solid #2b3b50;border-radius:12px;padding:10px}
    .node.active{outline:2px solid rgba(126,231,135,.7)}
    .node .k{font-size:12px;color:var(--muted)}
    .node .t{font-size:13px;margin-top:4px}
    .node .meta{margin-top:6px;font-size:12px;color:var(--muted)}
    .legend{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .slide{min-height: 220px}
    .sep{height:1px;background:#223042;margin:10px 0}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>On-chain Decision Blueprints for AI Agents</h1>
    <div class="small">
      This is an <b>story-first interactive explainer</b>. We start with a hero and their journey, then zoom in only when you’re ready.
      Concept: <code>Blueprint</code> (template) → <code>Mission</code> (runtime) → <code>Checkpoints</code> (steps).
    </div>

    <div class="tabs" id="tabs"></div>
    <div class="small" style="margin-top:6px">Pick a story. Each story is a hero moving through a blueprint. We reveal one layer at a time.</div>

    <div class="card" style="margin-top:12px">
      <div class="row" style="align-items:center">
        <div>
          <h2 id="storyTitle">The Hero & the Journey</h2>
          <div class="small" id="storySubtitle"></div>
        </div>
        <div style="text-align:right">
          <button id="btnPrev">Back</button>
          <button class="primary" id="btnStoryNext">Next</button>
        </div>
      </div>
      <div class="sep"></div>

      <!-- Slide 1: Hero -->
      <div class="slide" id="slideHero">
        <h3>1) Meet the hero</h3>
        <div class="small" id="heroText"></div>
        <div class="sep"></div>
        <div class="row">
          <div>
            <div class="pill">Blueprint</div>
            <div class="small" style="margin-top:8px">The company’s policy / playbook (template).</div>
          </div>
          <div>
            <div class="pill">Mission</div>
            <div class="small" style="margin-top:8px">One real case / contract in motion (runtime instance).</div>
          </div>
          <div>
            <div class="pill">Checkpoint</div>
            <div class="small" style="margin-top:8px">One step machine: on-chain rule or attestation gate.</div>
          </div>
        </div>
      </div>

      <!-- Slide 2: Journey overview -->
      <div class="slide" id="slideJourney" style="display:none">
        <h3>2) The journey (high-level)</h3>
        <div class="small">One thing at a time: watch the mission move through the workflow before we explain details.</div>
        <div class="sep"></div>
        <canvas id="viz" width="980" height="220" style="width:100%;height:auto;border-radius:14px;border:1px solid #223042;background:#081018"></canvas>
        <div class="hint">Tip: click <b>Start</b> then <b>Step</b> to move the hero forward.</div>
        <div class="sep"></div>
        <div class="row">
          <div>
            <button class="primary" id="btnStart">Start</button>
            <button id="btnNext">Step</button>
            <button id="btnReset">Reset</button>
          </div>
          <div>
            <div class="pill">current: <span class="mono" id="curId">—</span></div>
            <div class="small" id="curExplain" style="margin-top:8px"></div>
          </div>
        </div>
      </div>

      <!-- Slide 3: Deep dive (one checkpoint at a time) -->
      <div class="slide" id="slideDeep" style="display:none">
        <h3>3) Deep dive (one checkpoint)</h3>
        <div class="small">We zoom into the current checkpoint only. No full dashboard overload.</div>
        <div class="sep"></div>
        <div class="row">
          <div>
            <div class="pill">Checkpoint</div>
            <h2 style="margin-top:10px" class="mono" id="deepCpTitle">—</h2>
            <div class="small" id="deepCpExplain"></div>
            <div class="sep"></div>
            <div class="small"><b>Enforced on-chain</b> steps are deterministic. <b>Attestation</b> steps accept signed claims but are still ordered + audited.</div>
          </div>
          <div>
            <h3>Mission state (only what changed)</h3>
            <pre id="vars"></pre>
          </div>
        </div>
        <div class="sep"></div>
        <h3>What happened</h3>
        <pre id="log"></pre>
      </div>

      <!-- Slide 4: Hiccups -->
      <div class="slide" id="slideHiccups" style="display:none">
        <h3>4) Real-world hiccups</h3>
        <div class="small">Flip a switch, rerun the journey, and see where the workflow blocks or escalates.</div>
        <div class="sep"></div>
        <div class="row">
          <div>
            <label class="small"><input type="checkbox" id="hiccupConflict" /> Conflicting attestations</label><br/>
            <label class="small"><input type="checkbox" id="hiccupDrift" /> Terms drift (attestations refer to old terms)</label><br/>
            <label class="small"><input type="checkbox" id="hiccupTimeout" /> Negotiation timeout → escalate to human</label>
            <div class="sep"></div>
            <button class="primary" id="btnRerun">Rerun story with hiccups</button>
          </div>
          <div>
            <h3>Why this matters</h3>
            <div class="small">
              The point isn’t perfect automation. It’s <b>safe autonomy</b>:
              the agent can act, but the org still gets <b>policy enforcement</b>, <b>audit trails</b>, and <b>escalation</b>.
            </div>
          </div>
        </div>
      </div>

      <div class="sep"></div>
      <div class="small">
        Repo: <a href="https://github.com/crea8r/onchain-decision-blueprints" target="_blank" rel="noreferrer">crea8r/onchain-decision-blueprints</a>
      </div>
    </div>
  </div>

  <script type="module" src="./main.js"></script>
</body>
</html>
